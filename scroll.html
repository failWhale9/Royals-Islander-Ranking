<!DOCTYPE html>

<link href="DataTables/datatables.min.css" rel="stylesheet">
 
<script src="DataTables/datatables.min.js"></script>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MapleRoyals Islander Ranking</title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="islander.css">

</head>
<body>

<img src="images/title.png" id="titleImage"></img>

<div id="navbar">
    <a href=""><span class="navInactive"> Rankings </span></a>
    <a href="/badges.html"><span class="navActive"> Badges </span></a>
    <a href="/unranked.html"><span class="navActive"> Unranked Islanders </span></a>
</div>



<div class="scrolldiv">
    <label>Base item: </label> 
    <select id="itemBase" onchange="baseChange()">
        <option value ="gomu">White Gomushin</option>
        <option value ="stripeM">Blue One-Lined T-Shirt</option>
        <option value ="stripeF">Red Striped T-Shirt</option>
        <option value ="ice">Ice Jeans</option>
        <option value ="sweat">Grey Thick Sweat Pants</option>
    </select>

    <label>Character: </label>
    <select id="character" onchange="charChange()">
        <option value ="toben">Toben</option>
        <option value ="namo">Namo</option>
        <option value ="lowly">Lowly</option>
        <option value ="mooshy">Mooshy</option>
    </select>
    <input type="submit" value="New Item" onclick="newItem()">
</div>

<!-- Inventory XY Values: 
 Top Left: 84,618
 Each X: +36
 Each Y: +34
 Shoe: 225,237
-->

<div class="scrollsim">
<img id="draggableImage" src="images/scroll/10.png" style="position:absolute; top:84px; left:618px;" draggable="true">
<img id="baseItem" src="images/scroll/gomu.png" style="position:absolute; top:225px; left:237px;">
<div id="dropZone" style="position:absolute; top:217px; left:237px; width:30px; height:30px;"></div>
<img id="char" src="/images/scroll/toben-neutral.gif" style="position:absolute; top:150px; left:442px; z-index: 9998;">
<img id="face" src="" style="position:absolute; top:152px; left:444px; z-index: 9999;">
<img id="scrollYes" src="" style="position:absolute; top:-10px; left:337px;">
<img id="scrollNo" src="" style="position:absolute; top:60px; left:413px;">
</div>




<div class="scrolldiv">
    <p>Stats:</p>
    <div>
        <span id="scrollStat">Scrolls Used:</span><span></span>
        <span id="scrollStat">Bases Used:</span><span></span>
        <span id="scrollStat">Best Result:</span><span></span>
    </div>
    <input type="submit" value="Reset Stats">
</div>









<div id="footer">
    <p>Page written and maintained by <img src="/images/shy.png"></p> 
</div>

<script>

const image = document.getElementById("draggableImage");
const dropZone = document.getElementById("dropZone");

function baseChange() {

    // Clear item box
    // Populate inventory
    // Change equip view
    // Reset stats

}

function charChange() {

}

function newItem() {
    // Roll for new item
    // Refresh item box
}

function shoeJump10() {
    // roll
    // update item box
}

// When drag starts, set data
image.addEventListener("dragstart", (e) => {
  e.dataTransfer.setData("text/plain", e.target.id); // optional: can set more specific info
});

// Allow drop on the dropZone
dropZone.addEventListener("dragover", (e) => {
  e.preventDefault(); // Necessary to allow dropping
});

// Handle drop
dropZone.addEventListener("drop", (e) => {
  e.preventDefault();
  const data = e.dataTransfer.getData("text/plain");

  console.log(data);

  // You can check if it's the correct image if needed
  if (data === "draggableImage") {
    // Trigger your custom function
    
    onImageDropped();
  }
});

function badResult()
{
  let sound = new Audio('/images/scroll/no.mp3');
  const noAnim = document.getElementById('scrollNo');
  const face = document.getElementById('face');
  sound.play();
  noAnim.style.display = 'block';
  noAnim.src = '';
  noAnim.src = 'images/scroll/no.gif';
  face.src ='/images/scroll/toben-smile.png';
  setTimeout(function() {
    face.src ='';
  }, 1000);
}

function goodResult()
{
  let sound = new Audio('/images/scroll/yes.mp3');
  const yesAnim = document.getElementById('scrollYes');
  const face = document.getElementById('face');
  sound.play();
  yesAnim.style.display = 'block';
  yesAnim.src = '';
  yesAnim.src = 'images/scroll/yes.gif';
  face.src ='/images/scroll/toben-smile.png';
  setTimeout(function() {
    face.src ='';
  }, 1000);
}


function onImageDropped() {
  if(Math.random() >= 0.9)
  {
    goodResult();
  }
  else
  {
    badResult();
  }
}

// todo:
// mouse pointer
// random emotes
// image box hover
// scroll box hover

</script>
</body>
</html>